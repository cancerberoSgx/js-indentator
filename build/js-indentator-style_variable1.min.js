/*! js-indentator 2013-08-19 */
!function(){var ns=jsindentator,visit=ns.visit,print=ns.print,indent=ns.printIndent;ns.styles||(ns.styles={});var variable1DefaultConfig=ns.config={tab:"	",newline:"\n",VAR:'return "var "',VAR_COMMA:'return ", "',VAR_COMMA_NEWLINE:'return ns.Indent() + "," + ns.tab',VAR_DECL_INIT:'return " = "',STMT_SEMICOLON:'return "; "',FUNCTION:'return "function "',FUNCTION_LP:'return " ( "',FUNCTION_RP:'return" ) "',FUNCTION_PARAM_COMMA:'return", "',FUNCTION_BODY_LP:'return "{" + ns.Indent()',LITERAL:function(a,b){0===a.raw.indexOf('"')?b.print(" /* TODO: HEY, we use single quotes, fix this literal: */"+a.raw):b.print(a.raw)},IDENTIFIER:"return node.name",Block:'ns.Indent() + "/* " + node.value + " */"',Line:'ns.Indent() + "// " + node.value '};ns.Indent=function(a){var b=[];a||b.push(ns.newline);for(var c=0;c<ns.blockCount;c++)b.push(ns.tab);return b.join("")},ns.createRenderer=function(s){if(_.isFunction(s))return s;var buf=[];buf.push("(function(node, ns, _){"),buf.push(s),buf.push("})");var str=buf.join("");try{var fn=eval(str),wrapped=_.wrap(fn,function(){var a=arguments[1],b=arguments[2],c=arguments[3];b.print(fn.apply(fn,[a,b,c]))});return wrapped}catch(e){throw console.log('"ERROR evaluating renderer '+s+"\noutput: "+str),e}},jsindentator.styles.variable1={setStyleConfig:function(a){ns.config=variable1DefaultConfig,_.each(_.keys(a),function(b){b&&(ns.config[b]=a[b])}),ns.styles.variable1.installStyle()},installStyle:function(){ns.variables={},_.each(_.keys(ns.config),function(a){if(a)try{ns.variables[a]=ns.createRenderer(ns.config[a])}catch(b){console.log("ERROR PARSING VARIABLE: ",a,b)}})},VariableDeclaration:function(a,b){b&&b.noFirstNewLine||indent(),ns.variables.VAR(a,ns,_);for(var c=0;c<a.declarations.length;c++)visit(a.declarations[c]),c<a.declarations.length-1&&(b&&b.noFirstNewLine?print(ns.variables.VAR_COMMA(a,ns,_)):ns.variables.VAR_COMMA_NEWLINE(a,ns,_));b&&b.noLastSemicolon||print(ns.variables.STMT_SEMICOLON(a,ns,_))},VariableDeclarator:function(a){visit(a.id),a.init&&(ns.variables.VAR_DECL_INIT(a,ns,_),visit(a.init))},Literal:function(a){ns.variables.LITERAL(a,ns,_)},Identifier:function(a){ns.variables.IDENTIFIER(a,ns,_)},FunctionExpression:function(a){ns.variables.FUNCTION(a,ns,_),visit(a.id),print(ns.variables.FUNCTION_LP(a,ns,_));for(var b=0;b<a.params.length;b++)visit(a.params[b]),b<a.params.length-1&&print(ns.variables.FUNCTION_PARAM_COMMA(a,ns,_));print(ns.variables.FUNCTION_RP(a,ns,_)),a.body.body.length>0?(print(ns.variables.FUNCTION_BODY_LP(a,ns,_)),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}")):print("{}")},BlockStatement:function(a){for(var b=0;b<a.body.length;b++)visit(a.body[b])},UpdateExpression:function(a){a.prefix?(print(a.operator),visit(a.argument)):(visit(a.argument),print(a.operator))},ForStatement:function(a){indent(),print("for("),visit(a.init,{noFirstNewLine:!0}),visit(a.test),print("; "),visit(a.update),print(")"),indent(),print("{"),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}")},ArrayExpression:function(a){print("[");for(var b=0;b<a.elements.length;b++)visit(a.elements[b]),b<a.elements.length-1&&print(", ");print("]")},ExpressionStatement:function(a){indent(),visit(a.expression),print(ns.variables.STMT_SEMICOLON(a,ns,_))},CallExpression:function(a){"FunctionExpression"===a.callee.type&&print("("),visit(a.callee),"FunctionExpression"===a.callee.type&&print(")"),print(" ( ");for(var b=0;b<a.arguments.length;b++)visit(a.arguments[b]),b<a.arguments.length-1&&print(", ");print(" ) ")},BinaryExpression:function(a){visit(a.left),print(" "+a.operator+" "),visit(a.right)},ObjectExpression:function(a){if(0===a.properties.length)return print("{}"),void 0;print("{"),ns.blockCount++,indent();for(var b=0;b<a.properties.length;b++){var c=a.properties[b];visit(c.key),print(": "),visit(c.value),b<a.properties.length-1&&(ns.print(ns.newline),ns._printIndent(ns.blockCount-1),print(","+ns.tab))}ns.blockCount--,indent(),print("}")},ReturnStatement:function(a){indent(),print("return "),visit(a.argument),print(ns.variables.STMT_SEMICOLON(a,ns,_))},ConditionalExpression:function(a){visit(a.test),print(" ? "),visit(a.consequent),print(" : "),visit(a.alternate)},SwitchStatement:function(a){indent(),print("switch ("),visit(a.discriminant),print(")"),indent(),print("{");for(var b=0;b<a.cases.length;b++)visit(a.cases[b]);indent(),print("}")},SwitchCase:function(a){indent(),print(null==a.test?"default":"case "),visit(a.test),print(":"),ns.blockCount++;for(var b=0;b<a.consequent.length;b++)visit(a.consequent[b]);ns.blockCount--},EmptyStatement:function(a){print(ns.variables.STMT_SEMICOLON(a,ns,_))},BreakStatement:function(){indent(),print("break;")},WhileStatement:function(a){indent(),print("while ( "),visit(a.test),print(" ) "),indent(),print("{"),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}")},AssignmentExpression:function(a){visit(a.left),print(" "+a.operator+" "),visit(a.right)},MemberExpression:function(a){visit(a.object),print("."),visit(a.property)},ThisExpression:function(){print("this")},SequenceExpression:function(a){print("( ");for(var b=0;b<a.expressions.length;b++)visit(a.expressions[b]),b<a.expressions.length-1&&print(", ");print(" )")},DoWhileStatement:function(a){indent(),print("do"),indent(),print("{"),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}"),indent(),print("while ( "),visit(a.test),print(" )"),print(ns.variables.STMT_SEMICOLON(a,ns,_))},NewExpression:function(a){print("new "),visit(a.callee),print("(");for(var b=0;b<a.arguments.length;b++)visit(a.arguments[b]),b<a.arguments.length-1&&print(", ");print(")")},WithStatement:function(a){indent(),print("with ( "),visit(a.object),print(" )"),indent(),print("{"),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}"),print(ns.variables.STMT_SEMICOLON(a,ns,_)),indent()},IfStatement:function(a,b){b&&b.noFirstNewLine||indent(),print("if ( "),visit(a.test),print(" )"),indent(),print("{"),ns.blockCount++,visit(a.consequent),ns.blockCount--,indent(),print("}"),a.alternate&&(indent(),print("else "),null==a.alternate.test&&(indent(),print("{"),ns.blockCount++),visit(a.alternate,{noFirstNewLine:!0}),null==a.alternate.test&&(ns.blockCount--,indent(),print("}")))},FunctionDeclaration:function(a){if(indent(),print("function "),visit(a.id),print(" ( "),a.params)for(var b=0;b<a.params.length;b++)visit(a.params[b]),b<a.params.length-1&&print(", ");print(" ) "),indent(),print("{"),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}")},UnaryExpression:function(a){print(a.operator+" "),visit(a.argument)},LogicalExpression:function(a){visit(a.left),print(" "+a.operator+" "),visit(a.right)},TryStatement:function(a){indent(),print("try"),indent(),print("{"),ns.blockCount++,visit(a.block),ns.blockCount--,indent(),print("}");for(var b=0;b<a.handlers.length;b++)visit(a.handlers[b]);indent(),print("finally"),indent(),print("{"),ns.blockCount++,visit(a.finalizer),ns.blockCount--,indent(),print("}")},CatchClause:function(a){console.log(a),indent(),print("catch ( "),a.param&&visit(a.param),print(" ) "),indent(),print("{"),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}")},ThrowStatement:function(a){indent(),print("throw "),visit(a.argument),print(ns.variables.STMT_SEMICOLON(a,ns,_))},ForInStatement:function(a){indent(),print("for ( "),visit(a.left,{noFirstNewLine:!0,noLastSemicolon:!0}),print(" in "),visit(a.right),print(" )"),indent(),print("{"),ns.blockCount++,visit(a.body),ns.blockCount--,indent(),print("}"),print(ns.variables.STMT_SEMICOLON(a,ns,_))},ContinueStatement:function(a){indent(),print("continue"),print(ns.variables.STMT_SEMICOLON(a,ns,_))},Block:function(a){indent(),print("/* "),print(a.value),print(" */")},Line:function(a){indent(),print("// "),print(a.value),indent()}}}();