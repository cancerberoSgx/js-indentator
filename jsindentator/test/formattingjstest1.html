<!doctype html>

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<title>formatting js test1</title>
<script src="../lib/esprima.js" type="text/javascript"></script>
<script src="../lib/underscore.js" type="text/javascript"></script>
<script src="../lib/jquery-2.0.3.min.js" type="text/javascript"></script>
<script src="../src/jsindentator.js" type="text/javascript"></script>
<script src="../src/style1.js" type="text/javascript"></script>
<script src="../src/style_clean.js" type="text/javascript"></script>

<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

<style type="text/css">
textarea{width: 100%; height: 120px;} 
.textbox{display: inline; width: 40%}
 h4{display: block; font-size: 1.1em;margin: 0; padding: 0; } 
</style>

</head>

<body>

<button id="doitButton">do it!</button>
<div class="textbox">
<h4>Original Code</h4>
<textarea id="input">
for(var i in o){alert(i+'='+o[i])};  
for(var j=7; ; ) {if(false){continue; }else{break; }}; 
try{"hello"; throw "error"; }
catch(ex){"world"; alert(ex); }
finally{alert('nightmare end')}
var a = typeof Object; 
function f1(a, b){alert('seb'); return a+b; };
if("".length===1 && a != "Apple"){alert('pp'); }
else if("".length==2){alert('ee'); }
else if("".length==3){alert('33e'); }
else if("".length==4){alert('44'); }
else {alert('kk'); }
var o = {a: 1, b: 2};
with (o) {  alert(a+b);}
var Class1=function(name){this.name=name}; 
Class1.prototype.sayHello=function(){return "hello "+this.name; };
var c1 = new Class1('albert');   
eval("alert('helloworld');"); 
var f=function(a){for(var i=0;i!=10;i++){alert(i);}}; var s=2,f=function namedf(a){}; var obj1={a: [2,3,4],b:true,c:1.23,d: {e:1.23,f:"hello", f1: function(a, b, c){var v2=1; switch(v2){case 0: (function(a){})(2); break; case 1: alert('good'); break; default: alert('def'); }; return a*b+c; }}};var s1="seba"; var r = window?'inabrowser':'notabrowser', ol = (function(n){var c = 15; while(c!=0){ this.y=( --c )*n; }; do {alert('error')} while(true){}{}})(9);

</textarea>
</div>
<!-- 

for(var i in o){alert(i+'='+o[i])};  
for(var j=7; ; ) {if(false){continue; }else{break; }}; 
try{"hello"; throw "error"; }
catch(ex){"world"; alert(ex); }
finally{alert('nightmare end')}
var a = typeof Object; 
function f1(a, b){alert('seb'); return a+b; };
if("".length===1 && a != "Apple"){alert('pp'); }
else if("".length==2){alert('ee'); }
else if("".length==3){alert('33e'); }
else if("".length==4){alert('44'); }
else {alert('kk'); }
var o = {a: 1, b: 2};
with (o) {  alert(a+b);}
var Class1=function(name){this.name=name}; 
Class1.prototype.sayHello=function(){return "hello "+this.name; };
var c1 = new Class1('albert');   
eval("alert('helloworld');"); 
var f=function(a){for(var i=0;i!=10;i++){alert(i);}}; var s=2,f=function namedf(a){}; var obj1={a: [2,3,4],b:true,c:1.23,d: {e:1.23,f:"hello", f1: function(a, b, c){var v2=1; switch(v2){case 0: (function(a){})(2); break; case 1: alert('good'); break; default: alert('def'); }; return a*b+c; }}};var s1="seba"; var r = window?'inabrowser':'notabrowser', ol = (function(n){var c = 15; while(c!=0){ this.y=( --c )*n; }; do {alert('error')} while(true){}{}})(9);
-->
<div class="textbox">
<h4>Nice Style 1</h4>
<textarea id="output1"></textarea>
</div>

<!-- <br/> -->
<div class="textbox">
<h4>Clean Style</h4>
<textarea id="output2"></textarea>
</div>


<script>
function escapeHTML( html ) {
    html = html.replace( /[<>]/g, function( match ) {
        if( match === '<' ) return '&lt;';
        else return '&gt;';
    });
    return html;
}
var doit = function(e){
	var config = {tab: '\t'}; 
	var code = jQuery('#input').val() || jQuery('#input').html();  
// 	alert(code); 
	jsindentator.visitors=jsindentator.visitorsStyle1; //installs style
	var indentedCode = escapeHTML(jsindentator.main(code, config));	
	jQuery('#output1').html(indentedCode);	 
	
	jsindentator.visitors=jsindentator.visitorsStyleClean; //installs style
	var indentedCode = escapeHTML(jsindentator.main(code, config));	
	jQuery('#output2').html(indentedCode);	
}; 
jQuery('#doitButton').click(doit); 
doit(); 
</script>
</body>
</html>
