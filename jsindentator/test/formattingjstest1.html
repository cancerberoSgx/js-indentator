<!doctype html>

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<title>formatting js test1</title>
<script src="../lib/esprima.js" type="text/javascript"></script>
<script src="../lib/underscore.js" type="text/javascript"></script>
<!-- <script src="../lib/jquery-2.0.3.min.js" type="text/javascript"></script> -->
<script src="../src/jsindentator.js" type="text/javascript"></script>
<script src="../src/styles/style1.js" type="text/javascript"></script>
<script src="../src/styles/style2.js" type="text/javascript"></script>
<script src="../src/styles/style_clean.js" type="text/javascript"></script>

<script src="jquery/jquery-2.0.3.min.js" type="text/javascript"></script>
<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    
<style type="text/css">
 body{font-size: 13px;} 
 textarea{ 
 	width: 99%; height: 220px; 
 	-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; 
 	font-family: monospace; font-size: 12px; 
 }  
 .textbox{display: inline; width: 40%} 
  h4{ */
 	display: block; font-size: 1.1em;margin: 0; padding: 0;  
  }  
  .outputcode{height: 500px;}
</style>

</head>

<body>
<div class="container">
    
    <div class="row">
    
<div class="span2">
<button id="doitButton" class="btn-large">do it!</button></div>
<div class="span10">
<h3>JavaScript Indentator</h3></div>
    </div>


<p>Please paste your JavaScript code in the first text area and press "do it". The indenter will produce some different styles of indentation versions of your code</p>
 
 
<div class="row">
<div class="span6">
    
<div class="textbox">
<h4>Original Code</h4>
<textarea id="input">
if(true) false; 
if("".length===1 && a != "Apple"){alert('pp'); }
else if("".length==2){alert('ee'); }
else if("".length==3){alert('33e'); }
else if("".length==4)alert('44'); 
else {alert('kk'); }
for(var i in o){alert(i+'='+o[i])};  
for(var j=7; ; ) {if(false){continue; }else{break; }}; 
try{"hello"; throw "error"; }
catch(ex){"world"; alert(ex); }
finally{alert('nightmare end')}
var a = typeof Object; 
function f1(a, b){alert('seb'); return a+b; };
var o = {a: 1, b: 2};
with (o) {  alert(a+b);}
var Class1=function(name){this.name=name}; 
Class1.prototype.sayHello=function(){return "hello "+this.name; };
var c1 = new Class1('albert');   
eval("alert('helloworld');"); 
var f=function(a){for(var i=0;i!=10;i++){alert(i);}}; 
var s=2,f=function namedf(a){}; 
var obj1={a: [2,3,4],b:true,c:1.23,d: {e:1.23,f:"hello", f1: function(a, b, c){var v2=1; switch(v2){case 0: (function(a){})(2); break; case 1: alert('good'); break; default: alert('def'); }; return a*b+c; }}};
var s1="seba"; var r = window?'inabrowser':'notabrowser', ol = (function(n){var c = 15; while(c!=0){ this.y=( --c )*n; }; do {alert('error')} while(true){}{}})(9);
</textarea>
</div>
    </div>
    
<!--     <div class="span6">     -->
    
<!-- 		<div class="row"> -->
		
		<div class="span3">
		
		<h4>Configuration</h4>
		<select><option>style1</option></select>
		<textarea id="config">{}</textarea>
		
		</div>
		
		<div class="span3">
		<h4>Debug Console</h4>
		<select><option>debug</option></select>
		<textarea id="debug">{}</textarea>
		</div>
		
<!-- 		</div> -->

<!-- 	</div> -->

    </div>

<ul class="nav nav-tabs" id="myTab">
<li class="active"><a href="#home">Style 2</a></li>
<li><a href="#profile">Minification</a></li>
<li><a href="#messages">Style 1</a></li>
</ul>
 
<div class="tab-content">
<div class="tab-pane active" id="home">
		<h4>Nice Style 2</h4>
		<textarea id="output3"class="outputcode"></textarea></div>
<div class="tab-pane" id="profile">
<h4>Clean Style - Minification</h4>
		<textarea id="output2" class="outputcode"></textarea>  
		</div>
<div class="tab-pane" id="messages">
		<h4>Nice Style 1</h4>
		<textarea id="output1"class="outputcode"></textarea> </div>
</div>

</div>


<script>
function escapeHTML( html ) {
    html = html.replace( /[<>]/g, function( match ) {
        if( match === '<' ) return '&lt;';
        else return '&gt;';
    });
    return html;
}
var doit = function(e){
	var config = {tab: '\t'}; 
	var code = jQuery('#input').val() || jQuery('#input').html();  
// 	alert(code); 
jsindentator.setStyle(jsindentator.styles.style1);
// 	jsindentator.visitors=jsindentator.styles.style1; //installs style
	var indentedCode = escapeHTML(jsindentator.main(code, config));	
	jQuery('#output1').html(indentedCode);	 
	
	jsindentator.setStyle(jsindentator.styles.clean); //jsindentator.visitors=jsindentator.visitorsStyleClean; //installs style
	var indentedCode = escapeHTML(jsindentator.main(code, config));	
	jQuery('#output2').html(indentedCode);	
	
	jsindentator.setStyle(jsindentator.styles.style2); 
// 	jsindentator.visitors=jsindentator.visitorsStyle2; //installs style
	var indentedCode = escapeHTML(jsindentator.main(code, config));	
	jQuery('#output3').html(indentedCode);
}; 
jQuery('#doitButton').click(doit); 
doit(); 
$('#myTab a').click(function(e){ 
	e.preventDefault();
	$(this).tab('show');
});

//textarea auto focus - http://stackoverflow.com/questions/5797539/jquery-select-all-text-from-a-textarea
var selectAll= function() {
    var $this = $(this);
    $this.select();

    // Work around Chrome's little problem
    $this.mouseup(function() {
        // Prevent further mouseup intervention
        $this.unbind("mouseup");
        return false;
    });
}; 
$("textarea").focus(selectAll);
$("textarea").click(selectAll);
// $('#myTab a:last').tab('show');
</script>

</body>

</html>
